import fixture.*
import tipoDeHabilidades.*
import estado.*

test "Una familia puede acceder a una propiedad" {

	var depto=fixture.crearDepto(15,15,50)
	var familia=fixture.crearFamilia()
	var leandro=fixture.crearPersona("Leandro",32,electricista)
	var maria=fixture.crearPersona("Maria",30,decoradora)
	
	leandro.podesTrabajar(10,depto)
	maria.podesTrabajar(5,depto)
	
	familia.agregarPersona(leandro)
	familia.agregarPersona(maria)
	
	assert.that(familia.estasHabilitada(depto))

}

test "Una familia no puede acceder a una propiedad por no ser habilitable" {

	//Asigno a una familia a una propiedad
	var depto=fixture.crearDepto(15,15,50)
	estado.incautarPropiedad(depto)
	
	var familiaPerez=fixture.crearFamilia()
	var leandro=fixture.crearPersona("Leandro",32,electricista)
	var maria=fixture.crearPersona("Maria",30,decoradora)
	
	leandro.podesTrabajar(10,depto)
	maria.podesTrabajar(5,depto)
	
	familiaPerez.agregarPersona(leandro)
	familiaPerez.agregarPersona(maria)
	depto.podesAsignarA(familiaPerez)
	
	//Asigno otra familia a la misma propiedad que a la familia anterior
	var familiaRodriguez=fixture.crearFamilia()
	var juan=fixture.crearPersona("Juan",32,electricista)
	var marcos=fixture.crearPersona("Marcos",30,decoradora)
	
	juan.podesTrabajar(10,depto)
	marcos.podesTrabajar(5,depto)
	
	familiaRodriguez.agregarPersona(juan)
	familiaRodriguez.agregarPersona(marcos)
	
	assert.notThat(familiaRodriguez.estasHabilitada(depto))

}

test "Una familia no puede acceder a una propiedad por no cumplir la cant de hs necesarias" {

	var depto=fixture.crearDepto(25,25,50)	
	var familiaRodriguez=fixture.crearFamilia()
	var juan=fixture.crearPersona("Juan",32,electricista)
	var marcos=fixture.crearPersona("Marcos",30,decoradora)
	
	juan.podesTrabajar(10,depto)
	marcos.podesTrabajar(5,depto)
	
	familiaRodriguez.agregarPersona(juan)
	familiaRodriguez.agregarPersona(marcos)
	
	assert.notThat(familiaRodriguez.estasHabilitada(depto))

}

test "Una familia no puede acceder a un depto porque el tamaño no es acorde a la familia" {

	var depto=fixture.crearDepto(25,25,50)	
	var familiaRodriguez=fixture.crearFamilia()
	var juan=fixture.crearPersona("Juan",32,electricista)
	var marcos=fixture.crearPersona("Marcos",30,decoradora)
	var pepe=fixture.crearPersona("Pepe",30,decoradora)
	var jose=fixture.crearPersona("Jose",30,decoradora)
	
	juan.podesTrabajar(10,depto)
	marcos.podesTrabajar(5,depto)
	pepe.podesTrabajar(10,depto)
	jose.podesTrabajar(10,depto)
	
	familiaRodriguez.agregarPersona(juan)
	familiaRodriguez.agregarPersona(marcos)
	familiaRodriguez.agregarPersona(pepe)
	familiaRodriguez.agregarPersona(jose)
	
	assert.notThat(familiaRodriguez.estasHabilitada(depto))

}